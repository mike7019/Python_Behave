version: 2.1
orbs:
  python: circleci/python@3.9.2
jobs:
  build:
    machine:
      resource_class: large
    steps:
      - checkout
      - run:
          name: Install Google Chrome Dependencies
          command: |
            sudo apt-get update
            sudo apt-get install -y fonts-liberation libasound2 libatk-bridge2.0-0 libatk1.0-0 libatspi2.0-0 libcairo2 libcups2 libgbm1 libgtk-3-0 libpango-1.0-0 libu2f-udev libvulkan1 libxdamage1 libxkbcommon0 xdg-utils
      - run:
          name: Install Google Chrome
          command: |
            wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
            sudo dpkg -i google-chrome-stable_current_amd64.deb
            sudo apt-get -f install
      - run:
          name: Set the Python Virtual Environment
          command: |
            python -m venv venv
            source venv/bin/activate
            pip install --upgrade pip
      - python/install-packages:
          pip-dependency-file: requirements.txt
          pkg-manager: pip
      - run:                    
          command: |
            behave features/login.feature

workflows:
  version: 2
  main:
    jobs:
      - build
